# QKD 网络 Beam Search 优化方案

## 1. 算法升级：从 Backtracking 切换到 Beam Search
- **原因**：解决深度优先回溯导致的内存爆炸和时间不确定性。
- **机制**：
  - 设定 `Beam Width (B) = 5`。
  - 每一轮请求处理时，保留当前最优的 B 个网络状态。
  - 每一轮结束，销毁不再需要的状态副本，确保内存占用恒定。

## 2. 状态评估与筛选
- **评分函数**：`Score = 当前累计功耗 + 未来路径冲突惩罚 (Heatmap)`。
- **筛选**：对所有生成的后续状态按 Score 排序，取前 B 个进入下一轮请求处理。

## 3. 内存与性能预期
- **内存**：占用极低且恒定（仅 B 个拓扑副本）。
- **时间**：线性增长，运行速度预计比回溯快 10 倍以上。
- **质量**：通过多路径并发探索，能够发现优于贪心算法的全局低功耗方案。

## 4. 实施步骤
1. 修改 `process_mid`：移除 `state_stack` 和回溯逻辑。
2. 实现 Beam 循环：每一步扩展 B 个状态，筛选后继续。
3. 最终输出 Beam 中最优的完整分配方案。
